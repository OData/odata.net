steps:
- task: NuGetToolInstaller@0
  inputs:
    versionSpec: '6.5.0'

- task: UseDotNet@2
  displayName: 'Install .NET 8 SDK'
  inputs:
    version: '8.x'

- task: PowerShell@2
  inputs:
    targetType: 'inline'
    script: |
      # Write your PowerShell commands here.      
      Write-Host "Hello World"
      [System.Reflection.Assembly]::Load("System.EnterpriseServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")
      $publish = New-Object System.EnterpriseServices.Internal.Publish
      $publish.GacInstall("$(gacUtil)")

- task: DotNetCoreCLI@2
  displayName: 'Build'  
  inputs:
    command: 'build'
    arguments: '--configuration $(BuildConfiguration) --no-incremental'
    projects: |
     $(Build.SourcesDirectory)\sln\OData.Pipeline.sln

- task: DotNetCoreCLI@2
  displayName: 'Test'
  inputs:
    command: 'test'
    arguments: '--configuration $(buildConfiguration) --settings $(Build.SourcesDirectory)\test.runsettings --no-build'
    projects: |      
     $(Build.SourcesDirectory)\sln\OData.Pipeline.sln
